package vulnerability

import (
	"github.com/NucleoFusion/cruise/internal/colors"
	"github.com/charmbracelet/bubbles/viewport"
	tea "github.com/charmbracelet/bubbletea"
	"github.com/charmbracelet/lipgloss"
)

type ScanList struct {
	Width   int
	Height  int
	Vp      viewport.Model
	Focused bool
}

func NewScanList(w int, h int) *ScanList {
	vp := viewport.New(w+3, h+1)
	vp.Style = lipgloss.NewStyle().Border(lipgloss.RoundedBorder()).BorderForeground(colors.Load().Lavender).
		Padding(1).Foreground(colors.Load().Text)

	return &ScanList{
		Width:  w,
		Height: h,
		Vp:     vp,
	}
}

func (s *ScanList) Init() tea.Cmd {
	return nil
}

func (s *ScanList) Update(msg tea.Msg) (*ScanList, tea.Cmd) {
	return s, nil
}

func (s *ScanList) View() string {
	// if len(s.Items) == 0 {
	// 	s.Vp.SetContent("Run the Scanner to get Output")
	// }

	style := lipgloss.NewStyle().Border(lipgloss.RoundedBorder()).BorderForeground(colors.Load().Surface0)
	if s.Focused {
		style = style.BorderForeground(colors.Load().Lavender)
	}

	// s.UpdateList()

	return style.Render(lipgloss.Place(s.Width, s.Height, lipgloss.Top, lipgloss.Center, "Scanners Here"))
}
